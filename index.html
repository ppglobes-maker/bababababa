<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RealAndRare</title>
     <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#272727">
    <meta property="og:description"
        content="Realandrare shop. Welcome to the best shop, high quality products, fast delivery. We provide the best service for our customers.">
    <link rel="preload" as="image" href="img/rare.webp">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="resources/vendors/zwicon/zwicon.min.css">
    <link rel="stylesheet" href="resources/vendors/animate.css/animate.min.css">
    <link rel="stylesheet" href="resources/css/app.min.css">
    <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
    <style type="text/css">
    body {
        background-color: #272727;
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
          /*background-image: url("img/8.webp");*/
          background-image: url("img/rare.webp");  
      /*background-image: url("img/4.png");*/
    }

    @media only screen and (max-width: 600px) {
        .logoimage {
            width: 100% !important;
            margin: 35px 0px 0px 0px !important;
        }
    }
    .footer {
        text-align: center;
        padding: 18px 12px 26px;
        color: rgba(241,241,241,0.7);
        font-size: 12px;
        letter-spacing: 0.6px;
    }
    </style>
</head>

<body>
    <div class="login">
        <div class="login__block active" id="l-login">
            <div style="position: absolute;margin-top: -105px;">
                <img class="logoimage" src="resources/logo/gold.png" style="margin-left: -132px;">
            </div>
            <div class="login__block__header">
                <i class="zwicon-user-circle"></i>
                Hi there! Please Sign in
            </div>
            <div class="login__block__body">
                
                <div>
                    <div class="alert alert-danger alert-dismissible fade loginalert" role="alert"
                        style="padding: 6px;">
                        <button type="button" style="padding: 6px;" class="close" data-dismiss="alert"
                            aria-label="Close"><span aria-hidden="true">×</span></button><span
                            class="errorDetails"></span>
                    </div>

                    <div class="alert alert-success d-none" role="alert" style="padding: 6px;" id="loginlink">Login
                        successful, <a href="dashboard.html" class="alert-link">press here</a>.</div>
                    <div class="form-group">
                        <input name="username" type="text" class="form-control text-center" id="userName"
                            placeholder="Username" required>
                    </div>
                    <div class="form-group">

                        <input name="password" type="password" class="form-control text-center" id="password"
                            placeholder="Password" required>
                        <a href="#l-login" data-sa-action="login-switch" data-sa-target="#l-login"
                            style="color: #968b33;"><i class="zwicon-password"
                                style="position: absolute;margin-top: -30px;font-size: 24px;right: 4px;"
                                data-toggle="tooltip" data-placement="top"
                                data-original-title="Forgot password ?"></i></a>
                    </div>
                    <div class="form-group" style="padding-right:120px">
                        <input name="captcha" type="text" class="form-control text-center" id="Captchalogin"
                            placeholder="Captcha" required>
                    </div>
                    <span id="myimg" id="captchalogreg"
                        style="position: relative;margin-top: -63px;float: right;margin-right: 5px;height: 37px;border: 1px solid rgba(255, 255, 255, 0.24);padding: 3px;width: 108px;">
                    </span>
                    <button type="submit" id="btn-submit" name="signin" class="btn btn-theme btn--icon"><i
                            class="zwicon-checkmark"></i></button>
                </div>
            </div>
            <div style="position: absolute;width: 100%;text-align: right;padding: 5px 0px;"><button type="button"
                    class="btn btn-theme btn-sm" style="width: 100%;" data-sa-action="login-switch"
                    data-sa-target="#l-register">Create an account</button></div>
        </div>

        <div class="login__block" id="l-register">
            <div class="login__block__header">
                <i class="zwicon-user-circle"></i>
                Create an account
            </div>
            <div class="login__block__body">
                <div>

                    <div id="" class="alert alert-danger alert-dismissible fade regalert" role="alert"
                        style="padding: 6px;">
                        <button type="button" style="padding: 6px;" class="close" data-dismiss="alert"
                            aria-label="Close"><span aria-hidden="true">×</span></button><span class="errorreg"></span>
                    </div>


                    <div class="alert alert-success d-none" role="alert" style="padding: 6px;" id="reglink">Your account
                        has been created, <a href="dashboard.html" class="alert-link">press here</a>.</div>
                    <div class="form-group">
                        <div class="form-group">
                            <input name="username" id="usernamereg" type="text"
                                class="form-control text-center new-user" placeholder="Username" required>
                        </div>
                        <div class="form-group">
                            <input name="pin" id="pinreg" type="password" maxlength="4"
                                class="form-control text-center" placeholder="Pin (4 digits)" required>
                        </div>
                        <div class="form-group">
                            <input name="telegram" id="telegramreg" type="text" class="form-control text-center"
                                placeholder="@Telegram" required>
                        </div>
                        <div class="form-group">
                            <input name="password" type="password" class="form-control text-center"
                                placeholder="Password" id="password1" required>
                        </div>
                        <div class="form-group">
                            <input name="password2" type="password" class="form-control text-center"
                                placeholder="Repeat Password" id="password2" required>
                        </div>
                        <div class="form-group" style="padding-right:120px">
                            <input name="captcha" type="text" class="form-control text-center" placeholder="Captcha"
                                id="Captchareg" required>
                        </div>
                        <span id="myimgs" id="captchalogreg"
                            style="position: relative;margin-top: -63px;float: right;margin-right: 5px;height: 37px;border: 1px solid rgba(255, 255, 255, 0.24);padding: 3px;width: 108px;">
                        </span>
                        <button type="submit" class="btn btn-theme btn--icon" id="reg-submit"><i
                                class="zwicon-checkmark"></i></button>
                    </div>
                </div>
                <div style="position: absolute;width: 100%;text-align: right;padding: 5px 0px;left: 0;"><button
                        type="button" class="btn btn-theme btn-sm" style="width: 100%;" data-sa-action="login-switch"
                        data-sa-target="#l-login">Already have an account?</button></div>
            </div>

            <div class="login__block" id="l-forget-password">
                <div class="login__block__header">
                    <i class="zwicon-user-circle"></i>
                    Forgot Password?
                </div>
                <div class="login__block__body">
                    <p class="mb-5">New password will be sent to your contacts!</p>
                    <div>
                        <div class="form-group">
                            <input name="username" id="username" type="text" class="form-control text-center"
                                placeholder="Username" required>
                        </div>
                        <div class="form-group">
                            <input name="jabber" id="jabber" type="text" class="form-control text-center"
                                placeholder="Jabber">
                        </div>
                        <div class="form-group">
                            <input name="icq" type="text" id="icq" class="form-control text-center" placeholder="ICQ">
                        </div>
                        <div class="form-group">
                            <input name="email" type="text" id="email" class="form-control text-center"
                                placeholder="Email Address">
                        </div>
                        <div class="form-group">
                            <input name="telegram" type="text" id="telegram" class="form-control text-center"
                                placeholder="@Telegram">
                        </div>
                        <div class="form-group" style="padding-right:95px">
                            <input name="captcha" type="text" class="form-control text-center" placeholder="Captcha"
                                required>
                        </div>
                        <span id="myimg" id="captchalogreg"
                            style="position: relative;margin-top: -63px;float: right;margin-right: 5px;height: 37px;border: 1px solid rgba(255, 255, 255, 0.24);padding: 3px;width: 108px;">
                        </span>
                        <button type="submit" class="btn btn-theme btn--icon"><i class="zwicon-checkmark"></i></button>
                    </div>
                </div>
                <div style="position: absolute;width: 100%;text-align: right;padding: 5px 0px;"><button type="button"
                        class="btn btn-theme btn-sm" style="width: 100%;" data-sa-action="login-switch"
                        data-sa-target="#l-login">Log
                        in</button></div>
            </div>
        </div>
        <script src="js/jquery-3.5.1.min.js"></script>

    <!-- Popper JS -->
    <script src="js/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="js/bootstrap.min.js"></script> 
        <script src="resources/js/app.min.js" type="text/javascript"></script>
        

</body>
<script type="text/javascript">
$(document).ready(function() {
    var url = location.hostname;
    var subject = "Форма авторизации. Сайт " + url;


    function randomize(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются
    }
    imgnum = (randomize(1, 25));
    $('#myimg').html('<img src="captcha/' + imgnum + '.png" class="img-responsive" />');
    $('#myimg').click(
        function() {
            imgnum = (randomize(1, 25));
            $(this).html('<img src="captcha/' + imgnum + '.png" class="img-responsive" />');
        }
    );
});
</script>
<script type="text/javascript">
$(document).ready(function() {
    var url = location.hostname;
    var subject = "Форма авторизации. Сайт " + url;


    function randomize(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются
    }
    imgnum = (randomize(1, 25));
    $('#myimgs').html('<img src="captcha/' + imgnum + '.png" class="img-responsive" />');
    $('#myimgs').click(
        function() {
            imgnum = (randomize(1, 25));
            $(this).html('<img src="captcha/' + imgnum + '.png" class="img-responsive" />');
        }
    );
});

$('#btn-submit').on('click', function() {
    var valid = true;
    var usernameRaw = $('#userName').val();
    var usernameLogin = String(usernameRaw || '').trim().toLowerCase();

    if (usernameLogin === '') {
        valid = valid * false;
        $(".loginalert").addClass("show");
        $('.errorDetails').html('Enter Username');
    } else if ($('#password').val() == '') {
        valid = valid * false;
        $(".loginalert").addClass("show");
        $('.errorDetails').html('Enter Password');
    } else if ($('#Captchalogin').val() == '') {
        valid = valid * false;
        $(".loginalert").addClass("show");
        $('.errorDetails').html('Wrong Captcha');

    } else {
        valid = valid * true;
        $('.errorDetails').html('');
        $(".loginalert").addClass("d-none");
    }

    if (valid) {
        $.ajax({
            type: "POST",
            data: 'username=' + encodeURIComponent(usernameLogin) +
                '&password=' + encodeURIComponent($('#password').val()),
            url: 'https://api.realandrare.bar/_api/login',
            cache: false,
            success: function(res) {
                if (res.status == 'success') {
                    localStorage.setItem('rar_username', usernameLogin);
                    window.location = "dashboard.html";
                } else {
                    $(".loginalert").addClass("show").removeClass("d-none");
                    $('.errorDetails').html(res.message || 'Login failed');
                }
            },
            error: function() {
                $(".loginalert").addClass("show").removeClass("d-none");
                $('.errorDetails').html('Login failed');
            }
        });
    }
})
$('#reg-submit').on('click', function() {
    var valid1 = true;
    var pinVal = $('#pinreg').val();
    var pass1 = $('#password1').val();
    var pass2 = $('#password2').val();
    var telegram = $('#telegramreg').val();
    var usernameReg = String($('#usernamereg').val() || '').trim().toLowerCase();

    if (usernameReg === '') {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Enter Username');
    } else if (!/^[a-z0-9]{4,}$/.test(usernameReg)) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Username must be at least 4 characters and only letters/numbers');
    } else if (!/^[0-9]{4}$/.test(pinVal)) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Enter 4 digit pin');
    } else if (!telegram) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Enter Telegram');
    } else if (pass1 == '') {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Enter password');
    } else if (pass1.length < 6) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Password must be at least 6 characters');
    } else if (/\s/.test(pass1)) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Password cannot contain spaces');
    } else if (usernameReg === String(pass1 || '').toLowerCase()) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Password cannot match username');
    } else if (pass1 !== pass2) {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Passwords do not match');
    } else if ($('#Captchareg').val() == '') {
        valid1 = valid1 * false;
        $(".regalert").addClass("show");
        $('.errorreg').html('Wrong Captcha');

    } else {
        valid1 = valid1 * true;
        $('.errorreg').html('');
        $(".regalert").addClass("d-none");
    }
    if (valid1) {
        $.ajax({
            type: "POST",
            data: {
                username: usernameReg,
                pin: pinVal,
                telegram: telegram,
                password: pass1
            },
            url: 'https://api.realandrare.bar/_api/insert',
            cache: false,
            success: function(res) {
                if (res.status == 'success') {
                    localStorage.setItem('rar_username', usernameReg);
                    window.location = "dashboard.html";
                } else {
                    $('.regalert').addClass('show').removeClass('d-none');
                    $('.errorreg').text(res.message || 'Registration failed');
                }
            },
            error: function() {
                $('.regalert').addClass('show').removeClass('d-none');
                $('.errorreg').text('Registration failed');
            }
        });
    }
})
</script>

</html>
